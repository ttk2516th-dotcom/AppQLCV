<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Trá»£ lÃ½ GiÃ¡o viÃªn</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
:root{
  --bg:#f9fafb;
  --primary:#2563eb;
  --font:'system-ui';
}
body{
  background:var(--bg);
  font-family:var(--font);
}
.today{
  background:#dbeafe;
}
.other-month{
  color:#9ca3af;
}
</style>
</head>

<body>

<div class="max-w-md mx-auto min-h-screen bg-white flex flex-col">

<header class="p-4 text-center font-bold text-xl border-b">
ğŸ“˜ Trá»£ lÃ½ GiÃ¡o viÃªn
</header>

<main class="flex-1 overflow-auto p-3">

<!-- ================= TAB THÃNG ================= -->
<section id="tab-month">
  <div class="flex justify-between items-center mb-2">
    <button onclick="changeMonth(-1)">â—€</button>
    <h2 id="monthTitle" class="font-semibold"></h2>
    <button onclick="changeMonth(1)">â–¶</button>
  </div>

  <div class="grid grid-cols-7 text-center text-xs font-semibold mb-1">
    <div>CN</div><div>T2</div><div>T3</div><div>T4</div>
    <div>T5</div><div>T6</div><div>T7</div>
  </div>

  <div id="monthGrid" class="grid grid-cols-7 gap-1"></div>
</section>

<!-- ================= TAB NGÃ€Y ================= -->
<section id="tab-day" class="hidden">
  <h2 id="dayTitle" class="font-semibold mb-2"></h2>
  <div id="dayTasks" class="space-y-2 text-sm"></div>
</section>

<!-- ================= TAB BÃO CÃO ================= -->
<section id="tab-report" class="hidden">
  <h2 class="font-semibold mb-2">ğŸ“Š BÃ¡o cÃ¡o</h2>
  <p class="text-sm text-gray-500">
    (Giai Ä‘oáº¡n tiáº¿p theo: biá»ƒu Ä‘á»“ theo vai trÃ² / ngÃ y)
  </p>
</section>

<!-- ================= TAB CÃ€I Äáº¶T ================= -->
<section id="tab-settings" class="hidden">
  <h2 class="font-semibold mb-2">ğŸ¨ Chá»§ Ä‘á»</h2>

  <label class="text-sm">MÃ u ná»n</label>
  <input type="color" onchange="setTheme('bg',this.value)">

  <label class="text-sm">MÃ u nÃºt</label>
  <input type="color" onchange="setTheme('primary',this.value)">

  <label class="text-sm">Kiá»ƒu chá»¯</label>
  <select onchange="setTheme('font',this.value)">
    <option value="system-ui">Máº·c Ä‘á»‹nh</option>
    <option value="serif">Trang trá»ng</option>
    <option value="monospace">Gá»n gÃ ng</option>
  </select>
</section>

</main>

<!-- ================= NAV ================= -->
<nav class="grid grid-cols-4 border-t text-xs text-center">
<button onclick="showTab('month')">ğŸ“…<br>ThÃ¡ng</button>
<button onclick="showTab('day')">â°<br>NgÃ y</button>
<button onclick="showTab('report')">ğŸ“Š<br>BÃ¡o cÃ¡o</button>
<button onclick="showTab('settings')">âš™ï¸<br>CÃ i Ä‘áº·t</button>
</nav>

</div>

<script>
/* ========= STATE ========= */
let tasks = JSON.parse(localStorage.getItem('tasks')||'[]');
let selectedDate = new Date();
let viewDate = new Date();

/* ========= TAB ========= */
function showTab(t){
['month','day','report','settings'].forEach(x=>{
document.getElementById('tab-'+x).classList.add('hidden');
});
document.getElementById('tab-'+t).classList.remove('hidden');
if(t==='day') renderDay();
}

/* ========= MONTH ========= */
function changeMonth(step){
viewDate.setMonth(viewDate.getMonth()+step);
renderMonth();
}

function renderMonth(){
const grid=document.getElementById('monthGrid');
grid.innerHTML='';
const y=viewDate.getFullYear();
const m=viewDate.getMonth();
monthTitle.innerText=`ThÃ¡ng ${m+1}/${y}`;

const first=new Date(y,m,1).getDay();
const start=new Date(y,m,1-first);

for(let i=0;i<42;i++){
const d=new Date(start);
d.setDate(start.getDate()+i);

const cell=document.createElement('div');
cell.className='border rounded p-1 text-xs min-h-[60px]';

if(d.getMonth()!==m) cell.classList.add('other-month');
if(isToday(d)) cell.classList.add('today');

cell.innerHTML=`<div class="flex justify-between">
<span>${d.getDate()}</span>
<button onclick="quickAdd('${d.toISOString()}')">â•</button>
</div>`;

cell.onclick=()=>{selectedDate=d;showTab('day')};

grid.appendChild(cell);
}
}

function isToday(d){
const t=new Date();
return d.toDateString()===t.toDateString();
}

/* ========= DAY ========= */
function renderDay(){
dayTitle.innerText='ğŸ“… '+selectedDate.toLocaleDateString();
const list=document.getElementById('dayTasks');
list.innerHTML='';
const dayTasks=tasks.filter(t=>{
return new Date(t.start).toDateString()===selectedDate.toDateString();
});
if(dayTasks.length===0){
list.innerHTML='<p class="text-gray-500">ChÆ°a cÃ³ cÃ´ng viá»‡c</p>';
}
dayTasks.forEach(t=>{
list.innerHTML+=`
<div class="border p-2 rounded">
<b>${t.title}</b><br>
${t.start} â†’ ${t.end}
</div>`;
});
}

/* ========= ADD ========= */
function quickAdd(date){
const title=prompt('TÃªn cÃ´ng viá»‡c?');
if(!title)return;
tasks.push({
title,
start:date,
end:date
});
localStorage.setItem('tasks',JSON.stringify(tasks));
renderMonth();
}

/* ========= THEME ========= */
function setTheme(k,v){
document.documentElement.style.setProperty('--'+k,v);
localStorage.setItem('theme-'+k,v);
}

['bg','primary','font'].forEach(k=>{
const v=localStorage.getItem('theme-'+k);
if(v) document.documentElement.style.setProperty('--'+k,v);
});

/* INIT */
renderMonth();
</script>

</body>
</html>
